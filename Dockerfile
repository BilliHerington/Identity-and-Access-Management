# Указываем базовый образ с Go и Alpine Linux
FROM golang:1.23.0-alpine

# Устанавливаем рабочую директорию внутри контейнера
WORKDIR /IAM

# Копируем go.mod и go.sum (если есть) для установки зависимостей
COPY go.mod ./

# Устанавливаем зависимости
RUN go mod download

# Копируем все файлы проекта в рабочую директорию контейнера
COPY . .

# Собираем приложение
RUN go build -o main ./cmd

# Указываем команду, которая будет выполнена при запуске контейнера
CMD ["./main"]
